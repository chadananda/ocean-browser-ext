<!DOCTYPE html>
<html>

<head>
  <!-- <script src="lib/jquery.min.js"></script> -->
  <!-- <script src="lib/mousetrap.min.js"></script> -->
</head>

<body>
  <textarea name="message"></textarea>
  <input>
  <script>
    // console.log("ctrl+.+t")
    // var reference = [
    //   { "keys": "ctrl+alt+r", "command": "prompt_insert_nums" },
    //   { "keys": "ctrl+alt+i", "command": "toggle_overwrite" },
    //   { "keys": "shift+ctrl+.", "command": "insert", "args": { "characters": "\n" } },

    //   // Dot-unders: Ḥ ḥ Ṭ ṭ Ẓ ẓ Ṣ ṣ Ḍ ḍ
    //   { "keys": "ctrl+.+H", "command": "insert", "args": { "characters": "Ḥ" } },
    //   { "keys": "ctrl+.+h", "command": "insert", "args": { "characters": "ḥ" } },
    //   { "keys": "ctrl+.", "T", "command": "insert", "args": { "characters": "Ṭ" } },
    //   { "keys": "ctrl+.", "t", "command": "insert", "args": { "characters": "ṭ" } },
    //   { "keys": "ctrl+.", "Z", "command": "insert", "args": { "characters": "Ẓ" } },
    //   { "keys": "ctrl+.", "z", "command": "insert", "args": { "characters": "ẓ" } },
    //   { "keys": "ctrl+.", "S", "command": "insert", "args": { "characters": "Ṣ" } },
    //   { "keys": "ctrl+.", "s", "command": "insert", "args": { "characters": "ṣ" } },
    //   { "keys": "ctrl+.", "D", "command": "insert", "args": { "characters": "Ḍ" } },
    //   { "keys": "ctrl+.", "d", "command": "insert", "args": { "characters": "ḍ" } },

    //   // Ayn and Hamza (6 and 9 curly single quotes): ’ ‘
    //   { "keys": "ctrl+'", "9"], "command": "insert", "args": { "characters": "’" } },
    //   { "keys": "ctrl+'", "6"], "command": "insert", "args": { "characters": "‘" } },

    //   // Acute vowels: Á á Í í Ú ú
    //   { "keys": "ctrl+'", "A"], "command": "insert", "args": { "characters": "Á" } },
    //   { "keys": "ctrl+'", "a"], "command": "insert", "args": { "characters": "á" } },
    //   { "keys": "ctrl+'", "I"], "command": "insert", "args": { "characters": "Í" } },
    //   { "keys": "ctrl+'", "i"], "command": "insert", "args": { "characters": "í" } },
    //   { "keys": "ctrl+'", "U"], "command": "insert", "args": { "characters": "Ú" } },
    //   { "keys": "ctrl+'", "u"], "command": "insert", "args": { "characters": "ú" } },

    //   // Underscore letters: Sh, Gh, Dh, Th, Kh, Zh, Ch  
    //   //  (may need to use macrons or underline instead!!
    //   { "keys": "ctrl+u", "s", "h"], "command": "insert", "args": { "characters": "<u>sh</u>" } },
    //   { "keys": "ctrl+u", "S", "h"], "command": "insert", "args": { "characters": "<u>Sh</u>" } },
    //   { "keys": "ctrl+u", "S", "H"], "command": "insert", "args": { "characters": "<u>SH</u>" } },
    //   { "keys": "ctrl+u", "g", "h"], "command": "insert", "args": { "characters": "<u>gh</u>" } },
    //   { "keys": "ctrl+u", "G", "h"], "command": "insert", "args": { "characters": "<u>Gh</u>" } },
    //   { "keys": "ctrl+u", "G", "H"], "command": "insert", "args": { "characters": "<u>GH</u>" } },
    //   { "keys": "ctrl+u", "d", "h"], "command": "insert", "args": { "characters": "<u>dh</u>" } },
    //   { "keys": "ctrl+u", "D", "h"], "command": "insert", "args": { "characters": "<u>Dh</u>" } },
    //   { "keys": "ctrl+u", "D", "H"], "command": "insert", "args": { "characters": "<u>DH</u>" } },
    //   { "keys": "ctrl+u", "t", "h"], "command": "insert", "args": { "characters": "<u>th</u>" } },
    //   { "keys": "ctrl+u", "T", "h"], "command": "insert", "args": { "characters": "<u>Th</u>" } },
    //   { "keys": "ctrl+u", "T", "H"], "command": "insert", "args": { "characters": "<u>TH</u>" } },
    //   { "keys": "ctrl+u", "k", "h"], "command": "insert", "args": { "characters": "<u>kh</u>" } },
    //   { "keys": "ctrl+u", "K", "h"], "command": "insert", "args": { "characters": "<u>Kh</u>" } },
    //   { "keys": "ctrl+u", "K", "H"], "command": "insert", "args": { "characters": "<u>KH</u>" } },
    //   { "keys": "ctrl+u", "z", "h"], "command": "insert", "args": { "characters": "<u>zh</u>" } },
    //   { "keys": "ctrl+u", "Z", "h"], "command": "insert", "args": { "characters": "<u>Zh</u>" } },
    //   { "keys": "ctrl+u", "Z", "H"], "command": "insert", "args": { "characters": "<u>ZH</u>" } },
    //   { "keys": "ctrl+u", "c", "h"], "command": "insert", "args": { "characters": "<u>ch</u>" } },
    //   { "keys": "ctrl+u", "C", "h"], "command": "insert", "args": { "characters": "<u>Ch</u>" } },
    //   { "keys": "ctrl+u", "C", "H"], "command": "insert", "args": { "characters": "<u>CH</u>" } }
    // ]

    // var keyMapping = {
    //   "ctrl+.+h": "ḥ",
    //   "ctrl+.+t": "ṭ"
    // }
    // var lastFocused;
    // $("textarea").focus(function () {
    //   lastFocused = document.activeElement;
    // });

    // function insertText(text) {
      
    //   var input = lastFocused;
    //   if (input == undefined) { return; }
    //   var scrollPos = input.scrollTop;
    //   var pos = 0;
    //   var browser = ((input.selectionStart || input.selectionStart == "0") ?
    //     "ff" : (document.selection ? "ie" : false));
    //   if (browser == "ie") {
    //     input.focus();
    //     var range = document.selection.createRange();
    //     range.moveStart("character", -input.value.length);
    //     pos = range.text.length;
    //   }
    //   else if (browser == "ff") { pos = input.selectionStart };

    //   var front = (input.value).substring(0, pos);
    //   var back = (input.value).substring(pos, input.value.length);
    //   input.value = front + text + back;
    //   pos = pos + text.length;
    //   if (browser == "ie") {
    //     input.focus();
    //     var range = document.selection.createRange();
    //     range.moveStart("character", -input.value.length);
    //     range.moveStart("character", pos);
    //     range.moveEnd("character", 0);
    //     range.select();
    //   }
    //   else if (browser == "ff") {
    //     input.selectionStart = pos;
    //     input.selectionEnd = pos;
    //     input.focus();
    //   }
    //   input.scrollTop = scrollPos;
    // }

    // Mousetrap.bind("ctrl+.+h", function (e) {
    //   e.preventDefault();
    //   insertText(keyMapping["ctrl+.+h"])
    // });
  </script>
</body>

</html>